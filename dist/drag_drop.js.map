{"version":3,"sources":["../src/drag_drop.js"],"names":["angular","module","directive","$document","restrict","scope","dragOptions","chart","link","elem","attr","startX","startY","x","y","start","stop","drag","container","width","offsetWidth","height","offsetHeight","id","document","getElementById","getBoundingClientRect","on","e","preventDefault","clientX","offsetLeft","clientY","offsetTop","mousemove","mouseup","setPosition","unbind","left","right","top","bottom","css"],"mappings":";;;;;;;;AAAAA,cAAQC,MAAR,CAAe,oBAAf,EAECC,SAFD,CAEW,aAFX,EAE0B,UAASC,SAAT,EAAoB;AAC5C,eAAO;AACLC,oBAAU,GADL;AAEL;AACAC,iBAAO;AACLC,yBAAa,cADR;AAELC,mBAAM;AAFD,WAHF;AAOLC,gBAAM,cAASH,KAAT,EAAgBI,IAAhB,EAAsBC,IAAtB,EAA4B;;AAGhC,gBAAKC,MAAL;AAAA,gBAAYC,MAAZ;AAAA,gBAAmBC,IAAER,MAAME,KAAN,CAAYM,CAAjC;AAAA,gBAAmCC,IAAET,MAAME,KAAN,CAAYO,CAAjD;AAAA,gBACIC,KADJ;AAAA,gBACWC,IADX;AAAA,gBACiBC,IADjB;AAAA,gBACuBC,SADvB;;AAGA,gBAAIC,QAASV,KAAK,CAAL,EAAQW,WAArB;AAAA,gBACIC,SAASZ,KAAK,CAAL,EAAQa,YADrB;;AAGA;AACA,gBAAIjB,MAAMC,WAAV,EAAuB;AACrBS,sBAASV,MAAMC,WAAN,CAAkBS,KAA3B;AACAE,qBAASZ,MAAMC,WAAN,CAAkBW,IAA3B;AACAD,qBAASX,MAAMC,WAAN,CAAkBU,IAA3B;AACA,kBAAIO,KAAKlB,MAAMC,WAAN,CAAkBY,SAA3B;AACA,kBAAIK,EAAJ,EAAQ;AACJL,4BAAYM,SAASC,cAAT,CAAwBF,EAAxB,EAA4BG,qBAA5B,EAAZ;AACH;AACF;;AAED;AACAjB,iBAAKkB,EAAL,CAAQ,WAAR,EAAqB,UAASC,CAAT,EAAY;AAC/BA,gBAAEC,cAAF;AACAlB,uBAASiB,EAAEE,OAAF,GAAYrB,KAAK,CAAL,EAAQsB,UAA7B;AACAnB,uBAASgB,EAAEI,OAAF,GAAYvB,KAAK,CAAL,EAAQwB,SAA7B;AACA9B,wBAAUwB,EAAV,CAAa,WAAb,EAA0BO,SAA1B;AACA/B,wBAAUwB,EAAV,CAAa,SAAb,EAAwBQ,OAAxB;AACA,kBAAIpB,KAAJ,EAAWA,MAAMa,CAAN;AACZ,aAPD;;AASA;AACA,qBAASM,SAAT,CAAmBN,CAAnB,EAAsB;AACpBd,kBAAIc,EAAEI,OAAF,GAAYpB,MAAhB;AACAC,kBAAIe,EAAEE,OAAF,GAAYnB,MAAhB;;AAEAyB;AACA,kBAAInB,IAAJ,EAAUA,KAAKW,CAAL;AACTvB,oBAAME,KAAN,CAAYM,CAAZ,GAAcA,CAAd;AACAR,oBAAME,KAAN,CAAYO,CAAZ,GAAcA,CAAd;AACF;;AAED;AACA,qBAASqB,OAAT,CAAiBP,CAAjB,EAAoB;AAClBzB,wBAAUkC,MAAV,CAAiB,WAAjB,EAA8BH,SAA9B;AACA/B,wBAAUkC,MAAV,CAAiB,SAAjB,EAA4BF,OAA5B;AACA9B,oBAAME,KAAN,CAAYM,CAAZ,GAAcA,CAAd;AACCR,oBAAME,KAAN,CAAYO,CAAZ,GAAcA,CAAd;AACD,kBAAIE,IAAJ,EAAUA,KAAKY,CAAL;AACX;;AAED;AACA,qBAASQ,WAAT,GAAuB;AACrB,kBAAIlB,SAAJ,EAAe;AACb,oBAAIL,IAAIK,UAAUoB,IAAlB,EAAwB;AACtBzB,sBAAIK,UAAUoB,IAAd;AACAjC,wBAAME,KAAN,CAAYM,CAAZ,GAAcA,CAAd;AACD,iBAHD,MAGO,IAAIA,IAAIK,UAAUqB,KAAV,GAAkBpB,KAA1B,EAAiC;AACtCN,sBAAIK,UAAUqB,KAAV,GAAkBpB,KAAtB;AACAd,wBAAME,KAAN,CAAYM,CAAZ,GAAcA,CAAd;AACD;AACD,oBAAIC,IAAII,UAAUsB,GAAlB,EAAuB;AACrB1B,sBAAII,UAAUsB,GAAd;AACAnC,wBAAME,KAAN,CAAYO,CAAZ,GAAcA,CAAd;AACD,iBAHD,MAGO,IAAIA,IAAII,UAAUuB,MAAV,GAAmBpB,MAA3B,EAAmC;AACxCP,sBAAII,UAAUuB,MAAV,GAAmBpB,MAAvB;AACAhB,wBAAME,KAAN,CAAYO,CAAZ,GAAcA,CAAd;AACD;AAGF;;AAKDL,mBAAKiC,GAAL,CAAS;;AAEPF,qBAAK1B,IAAI,IAFF;AAGPwB,sBAAMzB,IAAI;AAHH,eAAT;AAMD;AACF;AAxFI,SAAP;AA2FD,OA9FD","file":"drag_drop.js","sourcesContent":["angular.module('grafana.directives')\r\n\r\n.directive('ngDraggable', function($document) {\r\n  return {\r\n    restrict: 'A',\r\n    //templateUrl:'public/plugins/grafana-processline-panel/node.html',\r\n    scope: {\r\n      dragOptions: '=ngDraggable',\r\n      chart:'=chart'\r\n    },\r\n    link: function(scope, elem, attr) {\r\n\r\n\r\n      var  startX,startY,x=scope.chart.x,y=scope.chart.y,\r\n          start, stop, drag, container;\r\n\r\n      var width  = elem[0].offsetWidth,\r\n          height = elem[0].offsetHeight;\r\n\r\n      // Obtain drag options\r\n      if (scope.dragOptions) {\r\n        start  = scope.dragOptions.start;\r\n        drag   = scope.dragOptions.drag;\r\n        stop   = scope.dragOptions.stop;\r\n        var id = scope.dragOptions.container;\r\n        if (id) {\r\n            container = document.getElementById(id).getBoundingClientRect();\r\n        }\r\n      }\r\n\r\n      // Bind mousedown event\r\n      elem.on('mousedown', function(e) {\r\n        e.preventDefault();\r\n        startX = e.clientX - elem[0].offsetLeft;\r\n        startY = e.clientY - elem[0].offsetTop;\r\n        $document.on('mousemove', mousemove);\r\n        $document.on('mouseup', mouseup);\r\n        if (start) start(e);\r\n      });\r\n\r\n      // Handle drag event\r\n      function mousemove(e) {\r\n        y = e.clientY - startY;\r\n        x = e.clientX - startX;\r\n\r\n        setPosition();\r\n        if (drag) drag(e);\r\n         scope.chart.x=x;\r\n         scope.chart.y=y;\r\n      }\r\n\r\n      // Unbind drag events\r\n      function mouseup(e) {\r\n        $document.unbind('mousemove', mousemove);\r\n        $document.unbind('mouseup', mouseup);\r\n        scope.chart.x=x;\r\n         scope.chart.y=y;\r\n        if (stop) stop(e);\r\n      }\r\n\r\n      // Move element, within container if provided\r\n      function setPosition() {\r\n        if (container) {\r\n          if (x < container.left) {\r\n            x = container.left;\r\n            scope.chart.x=x;\r\n          } else if (x > container.right - width) {\r\n            x = container.right - width;\r\n            scope.chart.x=x;\r\n          }\r\n          if (y < container.top) {\r\n            y = container.top;\r\n            scope.chart.y=y;\r\n          } else if (y > container.bottom - height) {\r\n            y = container.bottom - height;\r\n            scope.chart.y=y;\r\n          }\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        elem.css({\r\n\r\n          top: y + 'px',\r\n          left: x + 'px'\r\n        });\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n})\r\n\r\n"]}